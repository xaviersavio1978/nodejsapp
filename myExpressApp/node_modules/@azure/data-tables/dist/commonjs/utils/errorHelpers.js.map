{"version":3,"file":"errorHelpers.js","sourceRoot":"","sources":["../../../src/utils/errorHelpers.ts"],"names":[],"mappings":";AAAA,uCAAuC;AACvC,kCAAkC;;AAsBlC,4DAkBC;AAlBD,SAAgB,wBAAwB,CACtC,KAAc,EACd,UAA2E,EAAE;IAE7E,MAAM,aAAa,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAC9C,IACE,aAAa;QACb,aAAa,CAAC,MAAM,KAAK,GAAG;QAC5B,aAAa,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,KAAK,oBAAoB,EAClE,CAAC;QACD,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,OAAO,CAAC,SAAS,iBAAiB,CAAC,CAAC;QAElE,IAAI,OAAO,CAAC,UAAU,EAAE,CAAC;YACvB,OAAO,CAAC,UAAU,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;QACxC,CAAC;IACH,CAAC;SAAM,CAAC;QACN,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAc;IACtC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC;QACxB,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,MAAM,aAAa,GAA8B,KAAK,CAAC,QAAqC,CAAC;IAE7F,IAAI,CAAC,aAAa,IAAI,CAAC,2BAA2B,CAAC,aAAa,CAAC,UAAU,CAAC,EAAE,CAAC;QAC7E,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,OAAO,aAAa,CAAC;AACvB,CAAC;AAED,SAAS,WAAW,CAAC,KAAc;IACjC,OAAQ,KAAmB,CAAC,IAAI,KAAK,WAAW,CAAC;AACnD,CAAC;AAED,SAAS,2BAA2B,CAClC,iBAAsB;IAEtB,OAAO,OAAO,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;AAChD,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport type { OperationOptions, OperationRequest } from \"@azure/core-client\";\nimport type { PipelineResponse, RestError } from \"@azure/core-rest-pipeline\";\nimport type { AzureLogger } from \"@azure/logger\";\nimport type { TableServiceError } from \"../generated/index.js\";\n\nexport type TableServiceErrorResponse = PipelineResponse & {\n  /**\n   * The parsed HTTP response headers.\n   */\n  parsedHeaders?: Record<string, unknown>;\n  /**\n   * The response body as parsed JSON or XML.\n   */\n  parsedBody: TableServiceError;\n  /**\n   * The request that generated the response.\n   */\n  request: OperationRequest;\n};\n\nexport function handleTableAlreadyExists(\n  error: unknown,\n  options: OperationOptions & { tableName?: string; logger?: AzureLogger } = {},\n): void {\n  const responseError = getErrorResponse(error);\n  if (\n    responseError &&\n    responseError.status === 409 &&\n    responseError.parsedBody.odataError?.code === \"TableAlreadyExists\"\n  ) {\n    options.logger?.info(`Table ${options.tableName} already Exists`);\n\n    if (options.onResponse) {\n      options.onResponse(responseError, {});\n    }\n  } else {\n    throw error;\n  }\n}\n\nfunction getErrorResponse(error: unknown): TableServiceErrorResponse | undefined {\n  if (!isRestError(error)) {\n    return undefined;\n  }\n\n  const errorResponse: TableServiceErrorResponse = error.response as TableServiceErrorResponse;\n\n  if (!errorResponse || !isTableServiceErrorResponse(errorResponse.parsedBody)) {\n    return undefined;\n  }\n\n  return errorResponse;\n}\n\nfunction isRestError(error: unknown): error is RestError {\n  return (error as RestError).name === \"RestError\";\n}\n\nfunction isTableServiceErrorResponse(\n  errorResponseBody: any,\n): errorResponseBody is TableServiceError {\n  return Boolean(errorResponseBody?.odataError);\n}\n"]}